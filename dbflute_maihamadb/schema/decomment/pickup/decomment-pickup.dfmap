map:{
    ; formatVersion = 1.0
    ; pickupDatetime = 2017-12-31T23:14:09.482
    ; decoMap = map:{
        ; tableList = list:{
            ; map:{
                ; tableName = MEMBER
                ; propertyList = list:{
                    ; map:{
                        ; decomment = piece 1
piece 2
piece 3
                        ; databaseComment = ä¼šå“¡ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãªã©ã®åŸºæœ¬æƒ…å ±ã‚’ä¿æŒã™ã‚‹ã€‚
åŸºæœ¬çš„ã«ç‰©ç†å‰Šé™¤ã¯ãªãã€é€€ä¼šã—ãŸã‚‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒé€€ä¼šä¼šå“¡ã«ãªã‚‹ã€‚
ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚„ã‚«ãƒ†ã‚´ãƒªã®é•ã†ä¼šå“¡æƒ…å ±ã¯ã€one-to-oneãªã©ã®é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¦ã€‚
                        ; pieceCode = 3a31a447
                        ; pieceOwner = yuto
                        ; pieceDatetime = 2017-12-31T23:14:02.050
                        ; previousPieceList = list:{
                            ; 88fa649c
                            ; b8f3e958
                            ; bac9263b
                            ; 576cca17
                        }
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; yuto
                            ; tominaga
                            ; jflute
                            ; ryohei
                        }
                    }
                }
                ; columnList = list:{
                    ; map:{
                        ; columnName = MEMBER_ID
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = é€£ç•ªã¨ã—ã¦è‡ªå‹•æ¡ç•ªã•ã‚Œã‚‹ã€‚ä¼šå“¡ã®IDã ã‘ã«é™ã‚‰ãšæ¡ç•ªæ–¹æ³•ã¯DBMSæ¬¡ç¬¬ã€‚
åŸºæœ¬ã¯MySQLãŒå¤šã„ã®ã§å•é¡Œã«ãªã‚‹ã“ã¨ã¯ã»ã¨ã‚“ã©ãªã„ã€‚

decomment \;
                                ; databaseComment = é€£ç•ªã¨ã—ã¦è‡ªå‹•æ¡ç•ªã•ã‚Œã‚‹ã€‚ä¼šå“¡IDã ã‘ã«é™ã‚‰ãšæ¡ç•ªæ–¹æ³•ã¯DBMSæ¬¡ç¬¬ã€‚
                                ; pieceCode = d941f67
                                ; pieceOwner = yuto
                                ; pieceDatetime = 2017-12-30T20:55:13.110
                                ; previousPieceList = list:{
                                    ; fb192f28
                                }
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; tominaga
                                    ; ryohei
                                    ; yuto
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = MEMBER_NAME
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = ä¼šå“¡ã®ãƒ•ãƒ«ãƒãƒ¼ãƒ ã®åç§°ã€‚
è‹—å­—ã¨åå‰ã‚’åˆ†ã‘ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒå¤šã„ãŒã€ã“ã“ã§ã¯å˜ç´”ã¯å˜ç´”ã«ã§ã²ã¨ã¾ã¨ã‚ã€‚
&lt\;br&gt\;ã«ã‚ˆã‚‹DBã‚³ãƒ¡ãƒ³ãƒˆã¨ã®ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚’ç›´ã—ãŸã€‚
                                ; databaseComment = ä¼šå“¡ã®ãƒ•ãƒ«ãƒãƒ¼ãƒ ã®åç§°ã€‚
è‹—å­—ã¨åå‰ã‚’åˆ†ã‘ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒå¤šã„ãŒã€ã“ã“ã§ã¯å˜ç´”ã«ã²ã¨ã¾ã¨ã‚ã€‚
                                ; pieceCode = 32ca67b5
                                ; pieceOwner = jflute
                                ; pieceDatetime = 2017-12-24T23:17:41.230
                                ; previousPieceList = list:{
                                    ; 28e001f
                                }
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; jflute
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = BIRTHDATE
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = å¿…é ˆé …ç›®ã§ã¯ãªã„ã®ã§ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ãŒãªã„ä¼šå“¡ã‚‚ã„ã‚‹ã€‚
ç”Ÿå¹´æœˆæ—¥ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ³ï¼ç§ã¯ç”Ÿã¾ã‚ŒãŸã‚‰ç©ºã‚’é£›ã¶ã€ã¨ã‚Šã‚ƒãƒ¼ï¼
                                ; databaseComment = å¿…é ˆé …ç›®ã§ã¯ãªã„ã®ã§ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ãŒãªã„ä¼šå“¡ã‚‚ã„ã‚‹ã€‚
                                ; pieceCode = 1e333dc5
                                ; pieceOwner = jflute
                                ; pieceDatetime = 2017-12-24T23:18:33.111
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; jflute
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = MEMBER_ACCOUNT
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = ãƒ­ã‚°ã‚¤ãƒ³IDã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã€‚
æ˜¨ä»Šãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ­ã‚°ã‚¤ãƒ³IDã¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã€ã‚ã¾ã‚Šè¦‹ã‹ã‘ãªã„ã‹ã‚‚!?

ãŠã‹ã—ã„ãªã

ãŠã‹ã—ã„ãªã

ãŠã‹ã—ã„ãªã...

æ²»ã£ãŸ...
                                ; databaseComment = ãƒ­ã‚°ã‚¤ãƒ³IDã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã€‚
æ˜¨ä»Šãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒ­ã‚°ã‚¤ãƒ³IDã¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã€ã‚ã¾ã‚Šè¦‹ã‹ã‘ãªã„ã‹ã‚‚!?
                                ; pieceCode = ea050467
                                ; pieceOwner = yuto
                                ; pieceDatetime = 2017-12-30T21:37:00.902
                                ; previousPieceList = list:{
                                    ; a273b0e8
                                }
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; yuto
                                }
                            }
                        }
                    }
                }
            }
            ; map:{
                ; tableName = MEMBER_SECURITY
                ; propertyList = list:{
                    ; map:{
                        ; decomment = ä¼šå“¡ã¨ã¯ one-to-one ã§ã€ä¼šå“¡ä¸€äººã«ã¤ãå¿…ãšä¸€ã¤ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æƒ…å ±ãŒã‚ã‚‹ã€‚
                        ; databaseComment = ä¼šå“¡ã¨ã¯&nbsp\;one-to-one&nbsp\;ã§ã€ä¼šå“¡ä¸€äººã«ã¤ãå¿…ãšä¸€ã¤ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æƒ…å ±ãŒã‚ã‚‹
                        ; pieceCode = 339d5b82
                        ; pieceOwner = ryohei
                        ; pieceDatetime = 2017-12-29T17:33:39.977
                        ; previousPieceList = list:{
                            ; 36b237b9
                        }
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; tominaga
                            ; ryohei
                        }
                    }
                }
                ; columnList = list:{}
            }
            ; map:{
                ; tableName = MEMBER_ADDRESS
                ; propertyList = list:{
                    ; map:{
                        ; decomment = ä¼šå“¡ã®ä½æ‰€ã«é–¢ã™ã‚‹æƒ…å ±ã§ã€åŒæ™‚ã«æœ‰åŠ¹æœŸé–“ã”ã¨ã«å±¥æ­´ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã€‚
ä¼šå“¡ã‚’åŸºç‚¹ã«è€ƒãˆãŸå ´åˆã€æ§‹é€ çš„ã«ã¯ one-to-many ã ãŒã€æ¥­å‹™çš„ãªå®šå‹æ¡ä»¶ã§ one-to-one ã«ãªã‚‹ã€‚ã“ã®ã‚ˆã†ãªæ§‹é€ ã‚’ã€Œæ¥­å‹™çš„one-to-oneã€ã¨å‘¼ã¶ï¼
æœ‰åŠ¹æœŸé–“ã¯éš™é–“ãªãåŸ‹ã‚ã‚‰ã‚Œã‚‹ãŒã€ã“ã“ã§ã¯ä½æ‰€æƒ…å ±ã®ãªã„ä¼šå“¡ã‚‚å­˜åœ¨ã—ã€å³å¯†ã«ã¯(æ¥­å‹™çš„ãª) &quot\;1 : 0..1&quot\; ã§ã‚ã‚‹ã€‚
ã‹ã¼ã™ã¯ã‹ã¼ã•ãªã„ã€‚ã„ã‚„ã‹ã¼ã™â™ªã€‚ğŸ’•

ã„ã‘ã‚‹ã‚“ã§ã™ã­ã€œ by ã‹ã¼ã™
                        ; databaseComment = ä¼šå“¡ã®ä½æ‰€ã«é–¢ã™ã‚‹æƒ…å ±ã§ã€åŒæ™‚ã«æœ‰åŠ¹æœŸé–“ã”ã¨ã«å±¥æ­´ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã€‚
ä¼šå“¡ã‚’åŸºç‚¹ã«è€ƒãˆãŸå ´åˆã€æ§‹é€ çš„ã«ã¯&nbsp\;one-to-many&nbsp\;ã ãŒã€æ¥­å‹™çš„ãªå®šå‹æ¡ä»¶ã§&nbsp\;one-to-one&nbsp\;ã«ãªã‚‹ã€‚ã“ã®ã‚ˆã†ãªæ§‹é€ ã‚’ã€Œæ¥­å‹™çš„one-to-oneã€ã¨å‘¼ã¶ï¼
æœ‰åŠ¹æœŸé–“ã¯éš™é–“ãªãåŸ‹ã‚ã‚‰ã‚Œã‚‹ãŒã€ã“ã“ã§ã¯ä½æ‰€æƒ…å ±ã®ãªã„ä¼šå“¡ã‚‚å­˜åœ¨ã—ã€å³å¯†ã«ã¯(æ¥­å‹™çš„ãª)&nbsp\;"1&nbsp\;:&nbsp\;0..1"&nbsp\;ã§ã‚ã‚‹ã€‚
                        ; pieceCode = e7633359
                        ; pieceOwner = yuto
                        ; pieceDatetime = 2017-12-30T20:53:51.622
                        ; previousPieceList = list:{
                            ; 630b8ac4
                        }
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; jflute
                            ; yuto
                        }
                    }
                }
                ; columnList = list:{
                    ; map:{
                        ; columnName = REGISTER_DATETIME
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = ç™»éŒ²æ—¥æ™‚
                                ; databaseComment = null
                                ; pieceCode = 72557ed2
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T17:00:08.456
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = UPDATE_DATETIME
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = æ›´æ–°æ—¥æ™‚
                                ; databaseComment = null
                                ; pieceCode = 44520528
                                ; pieceOwner = tominaga
                                ; pieceDatetime = 2017-12-29T18:13:41.393
                                ; previousPieceList = list:{
                                    ; 130ff842
                                    ; dd20d71
                                }
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; tominaga
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = REGISTER_USER
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼
                                ; databaseComment = null
                                ; pieceCode = 157f01a2
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T17:30:43.928
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = UPDATE_USER
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = æ›´æ–°ä¼šå“¡
                                ; databaseComment = null
                                ; pieceCode = 6a3761c0
                                ; pieceOwner = tominaga
                                ; pieceDatetime = 2017-12-29T18:04:37.870
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; tominaga
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = VERSION_NO
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = ãƒãƒ¼ã‚¸ãƒ§ãƒ³No
åŒæ™‚æ›´æ–°ã‚’ã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚
                                ; databaseComment = null
                                ; pieceCode = 7a4fbf4e
                                ; pieceOwner = tominaga
                                ; pieceDatetime = 2017-12-29T18:05:24.481
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; tominaga
                                }
                            }
                        }
                    }
                }
            }
            ; map:{
                ; tableName = PRODUCT
                ; propertyList = list:{
                    ; map:{
                        ; decomment = å•†å“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚å®šä¾¡ã¨ã‹å“ç•ªã¨ã‹ã‚’æŒã¤ã€‚

SQLã¨ã‹ã‹ã„ã¦ã¿ãŸã‚Šã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã¨ã‹ã‚ã‚Šãã†
\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=
-- å•†å“ã¨å•†å“ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ä¸€ç·’ã«å–å¾—
select * from PRODUCT p
  inner join PRODUCT_CATEGORY pc
     on p.PRODUCT_ID \= pc.PRODUCT_ID\;

-- å•†å“ã¨å•†å“ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ä¸€ç·’ã«å–å¾—
select * from PRODUCT p
  inner join PRODUCT_CATEGORY pc
     on p.PRODUCT_ID \= pc.PRODUCT_ID\;

select * from PRODUCT p
  inner join PRODUCT_CATEGORY pc
     on p.PRODUCT_ID \= pc.PRODUCT_ID\;
select * from PRODUCT p
  inner join PRODUCT_CATEGORY pc
     on p.PRODUCT_ID \= pc.PRODUCT_ID\;


-- å•†å“ã¨å•†å“ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ä¸€ç·’ã«å–å¾—
select * from PRODUCT p
  inner join PRODUCT_CATEGORY pc
     on p.PRODUCT_ID \= pc.PRODUCT_ID\;
\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=


2017/12/29 ï¼¼(^o^)ï¼
2016/12/29 ã‚«ãƒ©ãƒ è¿½åŠ 
2015/12/29 ä½œæˆ


å¤šåˆ†DBFluteãƒãƒ³ã‚ºã‚ªãƒ³section3ãã‚‰ã„ã‹ã‚‰ã‚ˆãä½¿ã†ãƒ†ãƒ¼ãƒ–ãƒ«
http://dbflute.seasar.org/ja/tutorial/handson/section03.html
                        ; databaseComment = null
                        ; pieceCode = 30d4e5da
                        ; pieceOwner = ryohei
                        ; pieceDatetime = 2017-12-29T17:43:08.524
                        ; previousPieceList = list:{
                            ; 30b1dfc0
                        }
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; ryohei
                        }
                    }
                }
                ; columnList = list:{
                    ; map:{
                        ; columnName = PRODUCT_STATUS_CODE
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = å•†å“ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¤ºã™ã‚ˆï¼
                                ; databaseComment = null
                                ; pieceCode = 4fc34ac2
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T16:56:21.571
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = REGULAR_PRICE
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = å•†å“ã®å®šä¾¡ã‚’ç¤ºã™ã‚ˆï¼ç¨æŠœã‚’æƒ³å®šã—ã¦ã„ã‚‹ã€‚
                                ; databaseComment = null
                                ; pieceCode = 319b3bf5
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T16:57:03.564
                                ; previousPieceList = list:{
                                    ; 615f5c2d
                                }
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = PRODUCT_CATEGORY_CODE
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = å•†å“ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ç¤ºã™ã‚³ãƒ¼ãƒ‰ã‚’å…¥ã‚Œã‚‹ã‚«ãƒ©ãƒ 
                                ; databaseComment = null
                                ; pieceCode = 31d6aa5f
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T16:57:24.775
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = UPDATE_USER
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = æ›´æ–°ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼
                                ; databaseComment = null
                                ; pieceCode = 5a4b6967
                                ; pieceOwner = tominaga
                                ; pieceDatetime = 2017-12-29T17:49:02.999
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; tominaga
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = REGISTER_DATETIME
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = å•†å“ã®ç™»éŒ²æ—¥æ™‚ã§ã™ã‚ˆã€‚
                                ; databaseComment = null
                                ; pieceCode = 5712f64b
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T17:31:53.175
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = PRODUCT_HANDLE_CODE
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = ã“ã‚Œã ã‘ã¯æ›¸ã„ã¦ãŠã“ã†ã€å•†å“ã‚’è­˜åˆ¥ã™ã‚‹æ¥­å‹™ä¸Šã®ã‚³ãƒ¼ãƒ‰ã€‚ã‚ˆãå“ç•ªã¨ã‹è¨€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã‡...
ã“ã‚“ãªã‚«ãƒ©ãƒ ã‚ã£ãŸã£ã‘ï¼Ÿï¼
                                ; databaseComment = ã“ã‚Œã ã‘ã¯æ›¸ã„ã¦ãŠã“ã†ã€å•†å“ã‚’è­˜åˆ¥ã™ã‚‹æ¥­å‹™ä¸Šã®ã‚³ãƒ¼ãƒ‰ã€‚ã‚ˆãå“ç•ªã¨ã‹è¨€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã‡...
                                ; pieceCode = 3fe928b6
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T17:36:07.108
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = REGISTER_USER
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = piece test1
piece test2
piece test3
piece test4
                                ; databaseComment = null
                                ; pieceCode = 7f66ef9
                                ; pieceOwner = yuto
                                ; pieceDatetime = 2017-12-31T20:32:26.116
                                ; previousPieceList = list:{
                                    ; a4585c02
                                    ; d265175a
                                    ; 78056264
                                }
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; yuto
                                }
                            }
                        }
                    }
                }
            }
            ; map:{
                ; tableName = MEMBER_LOGIN
                ; propertyList = list:{
                    ; map:{
                        ; decomment = ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ãŸã³ã«ç™»éŒ²ã•ã‚Œã‚‹ãƒ­ã‚°ã‚¤ãƒ³å±¥æ­´ã€‚
ç™»éŒ²ã•ã‚ŒãŸã‚‰æ›´æ–°ã•ã‚Œã‚‹ã‚‚å‰Šé™¤ã•ã‚Œã‚‹ã“ã¨ã‚‚ãªã„ã€‚ã•ã‚‰ã«ã¯ã€ç™»éŒ²ã™ã‚‹äººã‚‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚‚ã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã®ã§ã€(ç´™é¢ã®éƒ½åˆä¸Šã‚‚ã‚ã£ã¦)ã“ã“ã§ã¯å…±é€šã‚«ãƒ©ãƒ ã¯çœç•¥ã—ã¦ã„ã‚‹ã€‚
â˜…ã¡ã‚‡ã£ã¨ã“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã€ãƒ‡ã‚³ãƒ¡ãƒ³ãƒˆã—ãŸä¸Šã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚³ãƒ¡ãƒ³ãƒˆã‚‚ä¿®æ­£ã—ã¡ã‚ƒã£ã¦ã€ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã•ã›ã‚ˆã†ã€‚
                        ; databaseComment = ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ãŸã³ã«ç™»éŒ²ã•ã‚Œã‚‹ãƒ­ã‚°ã‚¤ãƒ³å±¥æ­´ã€‚
ç™»éŒ²ã•ã‚ŒãŸã‚‰æ›´æ–°ã•ã‚Œã‚‹ã‚‚å‰Šé™¤ã•ã‚Œã‚‹ã“ã¨ã‚‚ãªã„ã€‚ã•ã‚‰ã«ã¯ã€ç™»éŒ²ã™ã‚‹äººã‚‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚‚ã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã®ã§ã€(ç´™é¢ã®éƒ½åˆä¸Šã‚‚ã‚ã£ã¦)ã“ã“ã§ã¯å…±é€šã‚«ãƒ©ãƒ ã¯çœç•¥ã—ã¦ã„ã‚‹ã€‚
                        ; pieceCode = 260b4936
                        ; pieceOwner = jflute
                        ; pieceDatetime = 2017-12-29T17:00:14.044
                        ; previousPieceList = list:{}
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; jflute
                        }
                    }
                }
                ; columnList = list:{}
            }
            ; map:{
                ; tableName = WITHDRAWAL_REASON
                ; propertyList = list:{}
                ; columnList = list:{
                    ; map:{
                        ; columnName = DISPLAY_ORDER
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = è¡¨ç¤ºé †ã€‚ä¸€è¦§è¡¨ç¤ºã®ã¨ãã¨ã‹ã«ä½¿ã†ã¨æ€ã†ã€‚
                                ; databaseComment = null
                                ; pieceCode = 6f5be9be
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T16:58:17.872
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = WITHDRAWAL_REASON_CODE
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = é€€ä¼šç†ç”±ã‚³ãƒ¼ãƒ‰ï¼3æ–‡å­—ã§ç¤ºã™ã®ã ã€‚
                                ; databaseComment = null
                                ; pieceCode = 2a1d2270
                                ; pieceOwner = ryohei
                                ; pieceDatetime = 2017-12-29T17:32:55.296
                                ; previousPieceList = list:{
                                    ; 34592a23
                                }
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; ryohei
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = WITHDRAWAL_REASON_TEXT
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = é€€ä¼šç†ç”±ã®å†…å®¹ã€‚
ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ãªã®ã§ç›®ã„ã£ã±ã„æ›¸ã‘ã‚‹ãŒã€ãã†ã™ã‚‹ã¨UIå´ã§ãã‚Œã„ã«è¦‹ã›ã‚‹ã®ãŒå¤§å¤‰ã§ã—ã‚‡ã†ã­ã€‚
ãã‚Œã‚’ãã‚Œã„ã«è¦‹ã›ã‚‹ã®ãŒãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã®è…•ã®è¦‹ã›æ‰€ã§ã™ã­ã€‚ã€‚ã€‚ã€‚ã€‚

ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã‚’è§£æ¶ˆã—ã¾ã—ãŸ
                                ; databaseComment = é€€ä¼šç†ç”±ã®å†…å®¹ã€‚
ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ãªã®ã§ç›®ã„ã£ã±ã„æ›¸ã‘ã‚‹ãŒã€ãã†ã™ã‚‹ã¨UIå´ã§ãã‚Œã„ã«è¦‹ã›ã‚‹ã®ãŒå¤§å¤‰ã§ã—ã‚‡ã†ã­ã€‚
                                ; pieceCode = 45c3e9dc
                                ; pieceOwner = tominaga
                                ; pieceDatetime = 2017-12-29T19:00:59.799
                                ; previousPieceList = list:{
                                    ; 6a6e2f98
                                    ; 52fd85c9
                                    ; 929de3c
                                }
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; tominaga
                                }
                            }
                        }
                    }
                }
            }
            ; map:{
                ; tableName = MEMBER_FOLLOWING
                ; propertyList = list:{
                    ; map:{
                        ; decomment = ã¨ã‚ã‚‹ä¼šå“¡ãŒä»–ã®ä¼šå“¡ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã§ãã‚‹ã€‚ã™ã‚‹ã¨ã€ãƒ•ã‚©ãƒ­ãƒ¼ã—ãŸä¼šå“¡ã®è³¼å…¥å±¥æ­´(ã¾ã˜ã§!?)ãŒé–²è¦§ã§ãã‚‹ã€‚
                        ; databaseComment = ã¨ã‚ã‚‹ä¼šå“¡ãŒä»–ã®ä¼šå“¡ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã§ãã‚‹ã€‚ã™ã‚‹ã¨ã€ãƒ•ã‚©ãƒ­ãƒ¼ã—ãŸä¼šå“¡ã®è³¼å…¥å±¥æ­´ãŒé–²è¦§ã§ãã‚‹ã€‚
                        ; pieceCode = 1cde89d9
                        ; pieceOwner = jflute
                        ; pieceDatetime = 2017-12-29T16:57:34.667
                        ; previousPieceList = list:{}
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; jflute
                        }
                    }
                }
                ; columnList = list:{}
            }
            ; map:{
                ; tableName = PRODUCT_CATEGORY
                ; propertyList = list:{
                    ; map:{
                        ; decomment = å•†å“ã®ã‚«ãƒ†ã‚´ãƒªã‚’è¡¨ç¾ã™ã‚‹ãƒã‚¹ã‚¿ã€‚è‡ªå·±å‚ç…§FKã®éšå±¤ã«ãªã£ã¦ã„ã‚‹ã€‚

URLã¨ã‹ã‹ã‘ãªã„ã®ã‹ãªã...

http://localhost:8926/api/document/maihamadb/schemahtml/#member_service

ãƒªãƒ³ã‚¯ãŒæŠ¼ã›ã‚‹ã¨æœ€é«˜ãªã‚“ã ã‘ã©ã­ ç¬‘
                        ; databaseComment = å•†å“ã®ã‚«ãƒ†ã‚´ãƒªã‚’è¡¨ç¾ã™ã‚‹ãƒã‚¹ã‚¿ã€‚è‡ªå·±å‚ç…§FKã®éšå±¤ã«ãªã£ã¦ã„ã‚‹ã€‚
                        ; pieceCode = 12a8c2b7
                        ; pieceOwner = yuto
                        ; pieceDatetime = 2017-12-30T20:50:33.293
                        ; previousPieceList = list:{
                            ; 752f9d50
                        }
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; yuto
                        }
                    }
                }
                ; columnList = list:{}
            }
            ; map:{
                ; tableName = MEMBER_SERVICE
                ; propertyList = list:{
                    ; map:{
                        ; decomment = ä¼šå“¡ã®ã‚µãƒ¼ãƒ“ã‚¹æƒ…å ±ï¼ˆãƒã‚¤ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹ãªã©ï¼‰ã€‚
ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ãŸã‚ã«ã€ã‚ãˆã¦çµ±ä¸€æ€§ã‚’å´©ã—ã¦ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„çµŒç”±ã® one-to-one ã‚’è¡¨ç¾ã—ã¦ã„ã‚‹ã€‚

å°æ–‡å­—ã«å¤‰æ›´ã•ã‚Œãªã„ã‹ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹
ãã†ã„ãˆã°ã€ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‹ã‚ã£ã¦ã‚‚å¤§ä¸ˆå¤«ã ã‚ˆã­ï¼Ÿâ†’ &#x27\;
ã¨ã„ã†ã‹çµµæ–‡å­—ã¯ï¼ŸğŸ’–
                        ; databaseComment = ä¼šå“¡ã®ã‚µãƒ¼ãƒ“ã‚¹æƒ…å ±ï¼ˆãƒã‚¤ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹ãªã©ï¼‰ã€‚
ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ãŸã‚ã«ã€ã‚ãˆã¦çµ±ä¸€æ€§ã‚’å´©ã—ã¦ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„çµŒç”±ã®&nbsp\;one-to-one&nbsp\;ã‚’è¡¨ç¾ã—ã¦ã„ã‚‹ã€‚
                        ; pieceCode = 767ffa1f
                        ; pieceOwner = jflute
                        ; pieceDatetime = 2017-12-30T13:57:43.891
                        ; previousPieceList = list:{
                            ; ab95e92
                        }
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; tominaga
                            ; jflute
                        }
                    }
                }
                ; columnList = list:{
                    ; map:{
                        ; columnName = SERVICE_POINT_COUNT
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = æ˜ã‚‰ã‹ã«ãŠã‹ã—ã„ã‚«ãƒ©ãƒ å
                                ; databaseComment = è³¼å…¥ã—ãŸã‚‰å¢—ãˆã¦ä½¿ã£ãŸã‚‰æ¸›ã‚‹ã€‚
                                ; pieceCode = 4bc473be
                                ; pieceOwner = yuto
                                ; pieceDatetime = 2017-12-30T13:51:58.786
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; yuto
                                }
                            }
                        }
                    }
                    ; map:{
                        ; columnName = MEMBER_SERVICE_ID
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = ç‹¬ç«‹ã—ãŸä¸»ã‚­ãƒ¼ã¨ãªã‚‹ãŒã€å®Ÿè³ªçš„ã«ä¼šå“¡IDã¨ã¯ one-to-one ã§ã‚ã‚‹ã€‚
                                ; databaseComment = ç‹¬ç«‹ã—ãŸä¸»ã‚­ãƒ¼ã¨ãªã‚‹ãŒã€å®Ÿè³ªçš„ã«ä¼šå“¡IDã¨ã¯&nbsp\;one-to-one&nbsp\;ã§ã‚ã‚‹ã€‚
                                ; pieceCode = 25a8d9e5
                                ; pieceOwner = tominaga
                                ; pieceDatetime = 2017-12-29T17:54:35.653
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; tominaga
                                }
                            }
                        }
                    }
                }
            }
            ; map:{
                ; tableName = MEMBER_WITHDRAWAL
                ; propertyList = list:{
                    ; map:{
                        ; decomment = é€€ä¼šä¼šå“¡ã®é€€ä¼šã«é–¢ã™ã‚‹è©³ç´°ãªæƒ…å ±ã€‚
é€€ä¼šä¼šå“¡ã®ã¿ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ã€&quot\;1 : 0..1&quot\; ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã® one-to-one ã§ã‚ã‚‹ã€‚
å…±é€šã‚«ãƒ©ãƒ ãŒã‚ã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³NOãŒãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚
åŸºæœ¬çš„ã«æ›´æ–°ã¯å…¥ã‚‰ãªã„ãŒã€é‡è¦ãªãƒ‡ãƒ¼ã‚¿ãªã®ã§ä¸‡ãŒä¸€ã®ãŸã‚ã«æ›´æ–°ç³»ã®å…±é€šã‚«ãƒ©ãƒ ã‚‚ã€‚
é€€ä¼šã¯æ‚²ã—ã„


ã“ã“ã‹ã‚‰ã‚‚è¨‚æ­£ã§ãã‚‹ã®ã­

è¨˜å·ã ã‚‰ã‘ã‚„ã‚‹ãï½ !&quot\;#$%&amp\;&#x27\;()0\=~|&#x60\;\{*\}+&lt\;&gt\;?:\;:@\}[/**@@@~\=\=\=\=\\\||
                        ; databaseComment = é€€ä¼šä¼šå“¡ã®é€€ä¼šã«é–¢ã™ã‚‹è©³ç´°ãªæƒ…å ±ã€‚
é€€ä¼šä¼šå“¡ã®ã¿ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ã€"1&nbsp\;:&nbsp\;0..1"&nbsp\;ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®&nbsp\;one-to-one&nbsp\;ã§ã‚ã‚‹ã€‚
å…±é€šã‚«ãƒ©ãƒ ãŒã‚ã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³NOãŒãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚
åŸºæœ¬çš„ã«æ›´æ–°ã¯å…¥ã‚‰ãªã„ãŒã€é‡è¦ãªãƒ‡ãƒ¼ã‚¿ãªã®ã§ä¸‡ãŒä¸€ã®ãŸã‚ã«æ›´æ–°ç³»ã®å…±é€šã‚«ãƒ©ãƒ ã‚‚ã€‚
                        ; pieceCode = dd77d24b
                        ; pieceOwner = jflute
                        ; pieceDatetime = 2017-12-31T16:23:39.925
                        ; previousPieceList = list:{
                            ; f9bd326
                        }
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; tominaga
                            ; yuto
                            ; jflute
                        }
                    }
                }
                ; columnList = list:{}
            }
            ; map:{
                ; tableName = MEMBER_STATUS
                ; propertyList = list:{
                    ; map:{
                        ; decomment = ä¼šå“¡ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¤ºã™å›ºå®šçš„ãªãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚ã„ã‚ã‚†ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«åŒºåˆ†å€¤ï¼
æ¥­å‹™é‹ç”¨ä¸Šã§å¢—ãˆã‚‹ã“ã¨ã¯ãªãã€å¢—æ¸›ã™ã‚‹ã¨ãã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¿®æ­£ã¨ã‚‚ãªã†ãƒ¬ãƒ™ãƒ«ã®æ¥­å‹™å¤‰æ›´ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚

ã“ã†ã„ã£ãŸå›ºå®šçš„ãªãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ã€æ›´æ–°æ—¥æ™‚ãªã©ã®å…±é€šã‚«ãƒ©ãƒ ã¯å®šç¾©ã—ã¦ã„ãªã„ãŒã€æ¥­å‹™ä¸Šãã†ã„ã£ãŸæƒ…å ±ã‚’ç®¡ç†ã™ã‚‹å¿…è¦æ€§ãŒä½ã„ã¨ã„ã†ç†ç”±ã«åŠ ãˆã€ExampleDBã¨ã—ã¦å…±é€šã‚«ãƒ©ãƒ ã§ERå›³ãŒåŸ‹ã‚å°½ãã•ã‚Œã¦ã—ã¾ã„è¦‹ã¥ã‚‰ããªã‚‹ã¨ã„ã†ã¨ã“ã‚ã§å‰²ã‚Šåˆ‡ã£ã¦ã„ã‚‹ã€‚å®Ÿæ¥­å‹™ã§ã¯çµ±ä¸€çš„ã«å®šç¾©ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚
                        ; databaseComment = ä¼šå“¡ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¤ºã™å›ºå®šçš„ãªãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚ã„ã‚ã‚†ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«åŒºåˆ†å€¤ï¼
æ¥­å‹™é‹ç”¨ä¸Šã§å¢—ãˆã‚‹ã“ã¨ã¯ãªãã€å¢—æ¸›ã™ã‚‹ã¨ãã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¿®æ­£ã¨ã‚‚ãªã†ãƒ¬ãƒ™ãƒ«ã®æ¥­å‹™å¤‰æ›´ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚

ã“ã†ã„ã£ãŸå›ºå®šçš„ãªãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ã€æ›´æ–°æ—¥æ™‚ãªã©ã®å…±é€šã‚«ãƒ©ãƒ ã¯å®šç¾©ã—ã¦ã„ãªã„ãŒã€æ¥­å‹™ä¸Šãã†ã„ã£ãŸæƒ…å ±ã‚’ç®¡ç†ã™ã‚‹å¿…è¦æ€§ãŒä½ã„ã¨ã„ã†ç†ç”±ã«åŠ ãˆã€ExampleDBã¨ã—ã¦å…±é€šã‚«ãƒ©ãƒ ã§ERå›³ãŒåŸ‹ã‚å°½ãã•ã‚Œã¦ã—ã¾ã„è¦‹ã¥ã‚‰ããªã‚‹ã¨ã„ã†ã¨ã“ã‚ã§å‰²ã‚Šåˆ‡ã£ã¦ã„ã‚‹ã€‚å®Ÿæ¥­å‹™ã§ã¯çµ±ä¸€çš„ã«å®šç¾©ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚
                        ; pieceCode = 1d1af0e7
                        ; pieceOwner = tominaga
                        ; pieceDatetime = 2017-12-29T18:48:35.348
                        ; previousPieceList = list:{}
                        ; commentVersion = 0
                        ; authorList = list:{
                            ; tominaga
                        }
                    }
                }
                ; columnList = list:{}
            }
            ; map:{
                ; tableName = PURCHASE_PAYMENT
                ; propertyList = list:{}
                ; columnList = list:{
                    ; map:{
                        ; columnName = PAYMENT_DATETIME
                        ; propertyList = list:{
                            ; map:{
                                ; decomment = æ”¯æ‰•ã£ãŸã¨ãã®æ—¥æ™‚
ã“ã®è¾ºã ã£ãŸã‚‰ãƒãƒ¬ãªã„ã‚“ã˜ã‚ƒãªã„ã‹ã€ã‚³ãƒ¼ãƒ‰è²¼ã‚Šä»˜ã‘ã¦ã‚„ã‚‹ã‚¦ãƒ’ãƒ’
/*
 * Copyright 2014-2017 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot\;License&quot\;)\;
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot\;AS IS&quot\; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */
package org.dbflute.intro.app.web.document.decomment\;

import java.time.LocalDateTime\;
import java.util.ArrayList\;
import java.util.LinkedHashSet\;
import java.util.Set\;

import javax.annotation.Resource\;

import org.apache.commons.lang3.StringUtils\;
import org.dbflute.infra.doc.decomment.DfDecoMapPickup\;
import org.dbflute.infra.doc.decomment.DfDecoMapPiece\;
import org.dbflute.infra.doc.decomment.DfDecoMapPieceTargetType\;
import org.dbflute.intro.app.logic.document.decomment.DocumentDecommentPhysicalLogic\;
import org.dbflute.intro.app.web.base.IntroBaseAction\;
import org.dbflute.intro.mylasta.action.IntroMessages\;
import org.lastaflute.core.time.TimeManager\;
import org.lastaflute.core.util.LaStringUtil\;
import org.lastaflute.web.Execute\;
import org.lastaflute.web.response.JsonResponse\;

// done cabos decoment to decomment by jflute (2017/07/27)

/**
 * @author cabos
 * @author hakiba
 * @author deco
 */
public class DocumentDecommentAction extends IntroBaseAction \{

    // \=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=
    //                                                                           Attribute
    //                                                                           \=\=\=\=\=\=\=\=\=
    @Resource
    private TimeManager timeManager\;
    @Resource
    private DocumentDecommentPhysicalLogic decommentPhysicalLogic\;

    // done cabos use _taexec and use _tanest by jflute (2017/08/10)
    // \=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=
    //                                                                             Execute
    //                                                                             \=\=\=\=\=\=\=
    // -----------------------------------------------------
    //                                             Piece Map
    //                                             ---------
    // done cabos post to save, get to diff by jflute (2017/07/27)
    // done cabos javadoc with e.g. value by jflute (2017/09/28)
    /**
     * save decomment piece map
     *
     * @param projectName project name e.g. maihamadb (NotNull)
     * @param body decomment save body (NotNull)
     * @return void (NotNull)
     */
    @Execute(urlPattern \= &quot\;\{\}/@word&quot\;)
    public JsonResponse&lt\;Void&gt\; save(String projectName, DecommentSaveBody body) \{
        // done cabos validate columnName exists if target type is COLUMN in more validation by jflute (2017/11/11)
        // this is as client error so you can use verifyOrClientError(debugMsg, expectedBool)\;
        validate(body, messages -&gt\; moreValidate(body, messages))\;
        verifyOrClientError(buildDebugMessage(body), existsColumnNameIfTargetTypeColumn(body))\;
        decommentPhysicalLogic.saveDecommentPiece(projectName, mappingToDecoMapPiece(body))\;
        return JsonResponse.asEmptyBody()\;
    \}

    private void moreValidate(DecommentSaveBody body, IntroMessages messages) \{
        if (DfDecoMapPieceTargetType.Column \=\= body.targetType &amp\;&amp\; StringUtils.isEmpty(body.columnName)) \{
            messages.addConstraintsNotEmptyMessage(&quot\;columnName&quot\;)\;
        \}
    \}

    // done cabos unneeded public here, change to private by jflute (2017/11/12)
    private String buildDebugMessage(DecommentSaveBody body) \{
        StringBuilder sb \= new StringBuilder()\;
        sb.append(&quot\;If targetType is COLUMN, columnName must exists.&quot\;).append(&quot\;\n&quot\;)\;
        sb.append(&quot\;   targetType : &quot\;).append(body.targetType.code()).append(&quot\;\n&quot\;)\;
        sb.append(&quot\;   columnName : &quot\;).append(body.columnName).append(&quot\;\n&quot\;)\;
        return sb.toString()\;
    \}

    // done cabos change exist to exists for boolean expression by jflute (2017/11/12)
    private boolean existsColumnNameIfTargetTypeColumn(DecommentSaveBody body) \{
        return !(DfDecoMapPieceTargetType.Column \=\= body.targetType &amp\;&amp\; LaStringUtil.isEmpty(body.columnName))\;
    \}

    // done cabos use mappingTo... by jflute (2017/08/10)
    private DfDecoMapPiece mappingToDecoMapPiece(DecommentSaveBody body) \{
        // done cabos rename pieceMap to piece (can be simple here) by jflute (2017/11/11)
        String author \= getAuthor()\;
        Set&lt\;String&gt\; authorSet \= new LinkedHashSet&lt\;&gt\;(body.authors)\;
        authorSet.add(author)\;
        LocalDateTime pieceDatetime \= timeManager.currentDateTime()\;
        DfDecoMapPiece piece \= new DfDecoMapPiece(DfDecoMapPiece.DEFAULT_FORMAT_VERSION, body.tableName, body.columnName, body.targetType,
                body.decomment, body.databaseComment, body.commentVersion, new ArrayList&lt\;&gt\;(authorSet),
                buildPieceCode(body, pieceDatetime, author), pieceDatetime, author, body.previousPieces)\;
        return piece\;
    \}

    private String getAuthor() \{
        return decommentPhysicalLogic.getAuthor()\;
    \}

    private String buildPieceCode(DecommentSaveBody body, LocalDateTime pieceDateTime, String author) \{
        // done (by cabos) deco use tableName, columnName, date-time, owner by jflute (2017/11/11)
        StringBuilder sb \= new StringBuilder()\;
        sb.append(body.tableName)\;
        sb.append(&quot\;:&quot\;).append(body.columnName !\= null ? body.columnName : &quot\;&quot\;)\;
        sb.append(&quot\;:&quot\;).append(body.targetType)\;
        sb.append(&quot\;:&quot\;).append(pieceDateTime)\;
        sb.append(&quot\;:&quot\;).append(author)\;
        return Integer.toHexString(sb.toString().hashCode())\;
    \}

    // -----------------------------------------------------
    //                                            Pickup Map
    //                                            ----------
    // done hakiba rename piece to pickup by jflute (2017/08/17)
    /**
     * save decomment piece map
     *
     * @param projectName project name e.g. maihamadb (NotNull)
     * @return merged pickup as json (NotNull)
     */
    @Execute(urlPattern \= &quot\;\{\}/@word&quot\;)
    public JsonResponse&lt\;DecommentPickupResult&gt\; pickup(String projectName) \{
        DfDecoMapPickup dfDecoMapPickup \= decommentPhysicalLogic.readMergedPickup(projectName)\;
        return asJson(new DecommentPickupResult(dfDecoMapPickup.getTableList()))\;
    \}
\}
                                ; databaseComment = æ”¯æ‰•ã£ãŸã¨ãã®æ—¥æ™‚
                                ; pieceCode = 665c2ae4
                                ; pieceOwner = jflute
                                ; pieceDatetime = 2017-12-31T16:13:12.641
                                ; previousPieceList = list:{}
                                ; commentVersion = 0
                                ; authorList = list:{
                                    ; jflute
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}